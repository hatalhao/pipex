Check for the infile first
Parse Commands
Handle leaks.